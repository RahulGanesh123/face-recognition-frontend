{"ast":null,"code":"var _jsxFileName = \"/Users/rahulganesh/Desktop/Projects/facial_recognition/src/App.js\";\nimport React, { Component } from \"react\";\nimport Navigation from './components/Navigation/Navigation';\nimport Logo from './components/Logo/Logo';\nimport Rank from './components/Rank/Rank';\nimport FaceRecognition from './components/FaceRecognition/FaceRecognition';\nimport ImageLinkForm from './components/ImageLinkForm/ImageLinkForm';\nimport './App.css';\nimport Clarifai from 'clarifai';\nimport Signin from './components/Signin/Signin';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst app = new Clarifai.App({\n  apiKey: 'ad94ff7f5e664317b6b76f0fcfff1da8'\n});\n\nclass App extends Component {\n  constructor() {\n    super();\n\n    this.calculateFaceLocation = data => {\n      const clarifaiFace = data.outputs[0].data.regions[0].region_info.bounding_box;\n      const image = document.getElementById('inputimage');\n      const width = Number(image.width);\n      const height = Number(image.height);\n      return {\n        leftCol: clarifaiFace.left_col * width,\n        topRow: clarifaiFace.top_row * height,\n        rightCol: width - clarifaiFace.right_col * width,\n        bottomRow: height - clarifaiFace.bottom_row * height\n      };\n    };\n\n    this.displayFaceBox = box => {\n      console.log(box);\n      this.setState({\n        box: box\n      });\n    };\n\n    this.onInputChange = event => {\n      this.setState({\n        input: event.target.value\n      });\n    };\n\n    this.onButtonSubmit = () => {\n      this.setState({\n        imageUrl: this.state.input\n      });\n      app.models.predict(Clarifai.FACE_DETECT_MODEL, this.state.input).then(response => this.displayFaceBox(this.calculateFaceLocation(response))).catch(error => console.log(error));\n    };\n\n    this.onRouteChange = () => {\n      this.setState({\n        route: 'home'\n      });\n    };\n\n    this.state = {\n      /*We need to set both the input and the imageUrl as states, for the following reasons:\n          1. The input needs to be a state because when we want to detect a different image, we would want to detect from the new image, not the old one\n          2. The imageUrl needs to be a state as well, because when the input changes we don't immediately want it to be displayed, we want it to be dispalyed AFTER the button is clicked.  \n              So that is why we would set the imageUrl to the input in onButtonSubmit, and that is why we would pass the imageurl to the facerecognition component\n      */\n      input: '',\n      imageUrl: '',\n      box: {},\n      route: 'signin'\n    };\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"App\",\n      children: [/*#__PURE__*/_jsxDEV(Navigation, {\n        onRouteChange: this.onRouteChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 9\n      }, this), this.state.route === 'signin' ? /*#__PURE__*/_jsxDEV(Signin, {\n        onRouteChange: this.onRouteChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 13\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(Logo, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Rank, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(ImageLinkForm, {\n          onInputChange: this.onInputChange,\n          onButtonSubmit: this.onButtonSubmit\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(FaceRecognition, {\n          box: this.state.box,\n          imageUrl: this.state.imageUrl\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nexport default App;","map":{"version":3,"names":["React","Component","Navigation","Logo","Rank","FaceRecognition","ImageLinkForm","Clarifai","Signin","app","App","apiKey","constructor","calculateFaceLocation","data","clarifaiFace","outputs","regions","region_info","bounding_box","image","document","getElementById","width","Number","height","leftCol","left_col","topRow","top_row","rightCol","right_col","bottomRow","bottom_row","displayFaceBox","box","console","log","setState","onInputChange","event","input","target","value","onButtonSubmit","imageUrl","state","models","predict","FACE_DETECT_MODEL","then","response","catch","error","onRouteChange","route","render"],"sources":["/Users/rahulganesh/Desktop/Projects/facial_recognition/src/App.js"],"sourcesContent":["import React, {Component} from \"react\"\nimport Navigation from './components/Navigation/Navigation'\nimport Logo from './components/Logo/Logo'\nimport Rank from './components/Rank/Rank'\nimport FaceRecognition from './components/FaceRecognition/FaceRecognition'\nimport ImageLinkForm from './components/ImageLinkForm/ImageLinkForm'\nimport './App.css';\nimport Clarifai from 'clarifai'\nimport Signin from './components/Signin/Signin'\n\n\nconst app = new Clarifai.App({\n  apiKey: 'ad94ff7f5e664317b6b76f0fcfff1da8'\n})\nclass App extends Component {\n  constructor() {\n    super()\n    this.state = {\n      /*We need to set both the input and the imageUrl as states, for the following reasons:\n          1. The input needs to be a state because when we want to detect a different image, we would want to detect from the new image, not the old one\n          2. The imageUrl needs to be a state as well, because when the input changes we don't immediately want it to be displayed, we want it to be dispalyed AFTER the button is clicked.  \n              So that is why we would set the imageUrl to the input in onButtonSubmit, and that is why we would pass the imageurl to the facerecognition component\n\n\n    */\n      input: '',\n      imageUrl: '',\n      box: {},\n      route: 'signin'\n    }\n  }\n  calculateFaceLocation = (data) => {\n    const clarifaiFace = data.outputs[0].data.regions[0].region_info.bounding_box\n    const image = document.getElementById('inputimage')\n    const width = Number(image.width)\n    const height = Number(image.height)\n    return {\n      leftCol:  clarifaiFace.left_col * width,\n      topRow:   clarifaiFace.top_row * height,\n      rightCol: width - (clarifaiFace.right_col * width),\n      bottomRow: height - (clarifaiFace.bottom_row * height)\n    }\n  }\n\n  displayFaceBox = (box) => {\n    console.log(box)\n    this.setState({box : box})\n  }\n\n  onInputChange = (event) => {\n    this.setState({input: event.target.value})\n  }\n\n  onButtonSubmit = () => {\n    this.setState({imageUrl: this.state.input})\n    app.models.predict(\n      Clarifai.FACE_DETECT_MODEL, \n      this.state.input)\n    .then(response => this.displayFaceBox(this.calculateFaceLocation(response)))\n    .catch(error => console.log(error))\n  }\n\n  onRouteChange = () => {\n    this.setState({route: 'home'})\n  }\n\n  render() {\n    return (\n      <div className=\"App\">\n        <Navigation onRouteChange={this.onRouteChange}/>\n        {this.state.route === 'signin' \n          ? <Signin onRouteChange={this.onRouteChange}/> : \n          <div>\n            <Logo />\n            <Rank />\n            <ImageLinkForm \n            onInputChange = {this.onInputChange} \n            onButtonSubmit = {this.onButtonSubmit}/>\n            <FaceRecognition box={this.state.box} imageUrl={this.state.imageUrl}/>\n          </div>\n        }\n      </div>\n    )\n  }\n}\n\n\n\nexport default App;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}